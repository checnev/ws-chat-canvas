(this["webpackJsonpws-chat-canvas"]=this["webpackJsonpws-chat-canvas"]||[]).push([[0],Array(45).concat([function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),s=n.n(c),r=n(32),i=n.n(r),o=n(2),u=n(3),l=n(5),h=n(4),j=n(6),d=function(){function e(t,n){Object(o.a)(this,e),this.type=t,this.data=n}return Object(u.a)(e,null,[{key:"isRequest",value:function(e){return e.type&&"string"===typeof e.type}}]),e}(),b=function(){function e(){var t=this;Object(o.a)(this,e),this.ws=void 0,this.handlers={},this.recieve=function(e){try{var n=JSON.parse(e.data);if(d.isRequest(n)){var a=new d(n.type,n.data);t.handlers[a.type].forEach((function(e){e(a)}))}}catch(c){}},this.ws=new WebSocket("wss://ws-chat-canvas-checnev.herokuapp.com"),this.ws.addEventListener("message",this.recieve)}return Object(u.a)(e,[{key:"subscribe",value:function(e,t){Array.isArray(this.handlers[e])?this.handlers[e].push(t):this.handlers[e]=[t]}},{key:"unsubscribe",value:function(e,t){if(this.handlers[e]){var n=this.handlers[e].findIndex((function(e){return e===t}));-1!==n&&this.handlers[e].splice(n,1),0===this.handlers[e].length&&delete this.handlers[e]}}},{key:"once",value:function(e,t){var n=this;this.subscribe(e,(function a(c){t(c),n.unsubscribe(e,a)}))}},{key:"send",value:function(e,t){var n=new d(e,t);this.ws.send(JSON.stringify(n))}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();b.instance=void 0;var v=b,p=function e(t,n,a){Object(o.a)(this,e),this.id=t,this.name=n,this.color=a},f=s.a.createContext({user:null,api:null,isFetching:!1,signin:function(){}});f.displayName="User";var O=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).signin=function(t){e.setState({isFetching:!0});var n=v.getInstance();n.ws.addEventListener("open",(function(){n.once("signin",(function(t){var a=t.data,c=a.id,s=a.name,r=a.color,i=new p(c,s,r);e.setState({user:i,api:n,isFetching:!1})})),n.send("signin",t)})),n.ws.addEventListener("close",(function(){e.setState({user:null,api:null,isFetching:!1})}))},e.state={user:null,api:null,isFetching:!1},e}return Object(u.a)(n,[{key:"render",value:function(){return Object(a.jsx)(f.Provider,{value:Object(j.a)(Object(j.a)({},this.state),{},{signin:this.signin}),children:this.props.children})}}]),n}(s.a.Component),x=n(18),m=n(7),y=n(11),g=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).context=void 0,e}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.children,c=Object(y.a)(t,["children"]);return Object(a.jsx)(m.b,Object(j.a)(Object(j.a)({},c),{},{render:function(){return e.context.user?n:Object(a.jsx)(m.a,{to:"/signin"})}}))}}]),n}(s.a.Component);g.contextType=f;var w=g,C=(n(45),n(46),n(33)),N=Object(C.withNaming)({e:"__",m:"_",v:"_"}),k=(n(48),n(49),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=N("container"),t=this.props,n=t.children,c=Object(y.a)(t,["children"]);return Object(a.jsx)("div",{className:e(c),children:n})}}]),n}(s.a.Component)),D=n(10),W=(n(50),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=N("menu");return Object(a.jsx)("nav",{className:Object(D.a)(this.props.className,e()),children:Object(a.jsx)("ul",{className:e("items",{orientation:this.props.orientation}),role:"menu",children:this.props.children})})}}]),n}(s.a.Component));W.defaultProps={orientation:"vertical"};var R=W,S=(n(51),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=N("menu");return Object(a.jsx)("li",Object(j.a)(Object(j.a)({},this.props),{},{className:e("item"),role:"menuitem"}))}}]),n}(s.a.Component)),P=(n(52),[{anchor:"WS Chat & Canvas",to:"/",exact:!0},{anchor:"Chat",to:"/chat"},{anchor:"Canvas",to:"/canvas"}]),L=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).menuWrapperRef=s.a.createRef(),e.state={isOpen:!1},e.toggleMenu=function(){e.setState((function(e){return{isOpen:!e.isOpen}}))},e.closeMenu=function(t){e.menuWrapperRef.current.contains(t.target)||e.setState({isOpen:!1})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){document.documentElement.addEventListener("click",this.closeMenu)}},{key:"componentWillUnmount",value:function(){document.documentElement.removeEventListener("click",this.closeMenu)}},{key:"render",value:function(){var e=N("headerMenu");return Object(a.jsxs)("div",{className:e(),ref:this.menuWrapperRef,children:[Object(a.jsx)("div",{className:e("burger",{open:this.state.isOpen}),onClick:this.toggleMenu}),Object(a.jsx)(R,{className:Object(D.a)(this.props.className,e({open:this.state.isOpen})),orientation:"horizontal",children:P.map((function(t){return Object(a.jsx)(S,{children:Object(a.jsx)(x.b,{to:t.to,className:e("link"),activeClassName:"menu__link_active",exact:t.exact,children:t.anchor})},t.to)}))})]})}}]),n}(s.a.Component),I=(n(53),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=N("gridRow"),t=this.props,n=(t.children,Object(y.a)(t,["children"]));return Object(a.jsx)("div",{className:e(n),children:this.props.children})}}]),n}(s.a.Component)),T=(n(54),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=Object(y.a)(e,["children"]),c=N("gridRow");return Object(a.jsx)("div",{className:c("column",n),children:t})}}]),n}(s.a.Component)),A=(n(55),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=N("userInfo");return Object(a.jsxs)("div",{className:Object(D.a)(this.props.className,e()),children:[Object(a.jsx)("div",{className:e("avatar"),style:{backgroundColor:this.props.user.color},children:this.props.user.name[0].toUpperCase()}),Object(a.jsx)("span",{className:e("username"),children:this.props.user.name})]})}}]),n}(s.a.Component)),E=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).context=void 0,e}return Object(u.a)(n,[{key:"render",value:function(){var e=N("header");return Object(a.jsx)("header",{className:e(),children:Object(a.jsx)(k,{maxWidth:"xl",children:Object(a.jsxs)(I,{alignItems:"center",children:[Object(a.jsx)(T,{xs:6,sm:8,children:Object(a.jsx)(L,{})}),Object(a.jsx)(T,{xs:6,sm:4,children:Object(a.jsx)("div",{className:e("user"),children:this.context.user?Object(a.jsx)(A,{user:this.context.user}):Object(a.jsx)(x.b,{to:"/signin",className:e("signinLink"),children:"Sign In"})})})]})})})}}]),n}(s.a.Component);E.contextType=f;var M=E,F=(n(56),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=N("content");return Object(a.jsx)("div",{className:e(),children:this.props.children})}}]),n}(s.a.Component)),U=(n(57),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=N("footer");return Object(a.jsx)("div",{className:e(),children:Object(a.jsxs)(k,{maxWidth:"xl",justifyContent:"flex-end",children:["WS Chat & Canvas ",(new Date).getFullYear(),"."]})})}}]),n}(s.a.PureComponent)),B=(n(58),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=N("layout"),t=this.props.fixed;return Object(a.jsxs)("div",{className:e({fixed:t}),children:[Object(a.jsx)(M,{}),Object(a.jsx)(F,{children:this.props.children}),Object(a.jsx)(U,{})]})}}]),n}(s.a.Component)),z=n(23),_=(n(59),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=N("message"),t=this.props.message,n=t.author,c=t.date,s=t.text;return Object(a.jsxs)("div",{className:e({direction:this.props.direction}),children:[Object(a.jsx)("div",{className:e("text"),children:s}),Object(a.jsxs)("div",{className:e("author"),children:[Object(a.jsx)(A,{user:n}),Object(a.jsx)("span",{className:e("date"),children:c.toLocaleString().replace(",","")})]})]})}}]),n}(s.a.Component)),q=(n(60),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).messagesRef=s.a.createRef(),e}return Object(u.a)(n,[{key:"componentDidUpdate",value:function(){var e=this.messagesRef.current;null===e||void 0===e||e.scrollBy({top:e.scrollHeight,behavior:"smooth"})}},{key:"render",value:function(){var e=this,t=N("dialog");return Object(a.jsx)("div",{className:t(),children:Object(a.jsx)("div",{className:t("window"),children:Object(a.jsx)("div",{className:t("messages"),ref:this.messagesRef,children:this.props.messages.map((function(t){return Object(a.jsx)(_,{direction:t.author.id===e.props.user.id?"out":"in",message:t},t.id)}))})})})}}]),n}(s.a.Component)),J=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).context=void 0,e.state={messages:[]},e.recieveMessage=function(t){e.setState((function(e){var n=t.data;return n.date=new Date(n.date),{messages:[].concat(Object(z.a)(e.messages),[t.data])}}))},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e;null===(e=this.context.api)||void 0===e||e.subscribe("chat",this.recieveMessage)}},{key:"componentWillUnmount",value:function(){var e;null===(e=this.context.api)||void 0===e||e.unsubscribe("chat",this.recieveMessage)}},{key:"render",value:function(){return Object(a.jsx)(q,{messages:this.state.messages,user:this.context.user})}}]),n}(s.a.Component);J.contextType=f;var Y=J,G=n(19),H=(n(61),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=N("chatForm");return Object(a.jsxs)(G.a,{className:e(),children:[Object(a.jsx)("textarea",{name:"text",placeholder:"What's new ?",onChange:this.props.handleChange,onBlur:this.props.handleBlur,value:this.props.values.text}),Object(a.jsx)("button",{type:"submit",className:e("submit")})]})}}]),n}(s.a.Component)),X=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).context=void 0,e.sendMessage=function(t){var n;null===(n=e.context.api)||void 0===n||n.send("chat",{author:e.context.user,date:new Date,text:t})},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsx)(G.b,{initialValues:{text:""},onSubmit:function(t,n){var a=n.resetForm;e.sendMessage(t.text.trim()),a()},validate:function(e){var t={};return e.text.trim()||(t.text="Text is empty!"),t},children:function(e){return Object(a.jsx)(H,Object(j.a)({},e))}})}}]),n}(s.a.Component);X.contextType=f;var V=X,K=(n(62),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=N("chat");return Object(a.jsx)("div",{className:e(),children:Object(a.jsx)(I,{children:Object(a.jsxs)(T,{xs:12,children:[Object(a.jsx)(Y,{}),Object(a.jsx)(V,{})]})})})}}]),n}(s.a.Component)),Q=(n(63),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=N("userList");return Object(a.jsx)("ul",{className:Object(D.a)(this.props.className,e()),children:this.props.users.map((function(e){return Object(a.jsx)("li",{children:Object(a.jsx)(A,{user:e})},e.name)}))})}}]),n}(s.a.Component)),Z=function(){function e(){Object(o.a)(this,e)}return Object(u.a)(e,null,[{key:"getAll",value:function(){return fetch("".concat("https://ws-chat-canvas-checnev.herokuapp.com","/users"),{mode:"cors"}).then((function(e){return e.json()}))}}]),e}(),$=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).context=void 0,e.state={users:[]},e.join=function(t){var n=t.data;e.setState((function(e){return{users:[].concat(Object(z.a)(e.users),[n])}}))},e.leave=function(t){var n=t.data;e.setState((function(e){var t=e.users.findIndex((function(e){return e.id===n.id}));if(-1!==t)return e.users.splice(t,1),{users:Object(z.a)(e.users)}}))},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e,t,n=this;Z.getAll().then((function(e){n.setState({users:e})})),null===(e=this.context.api)||void 0===e||e.subscribe("join",this.join),null===(t=this.context.api)||void 0===t||t.subscribe("leave",this.leave)}},{key:"componentWillUnmount",value:function(){var e,t;null===(e=this.context.api)||void 0===e||e.unsubscribe("join",this.join),null===(t=this.context.api)||void 0===t||t.unsubscribe("leave",this.leave)}},{key:"render",value:function(){return Object(a.jsx)(Q,{users:this.state.users})}}]),n}(s.a.Component);$.contextType=f;var ee=$,te=(n(64),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=N("chatPage");return Object(a.jsx)("div",{className:e(),children:Object(a.jsx)(k,{maxWidth:"xl",children:Object(a.jsxs)(I,{children:[Object(a.jsx)(T,{xs:12,sm:9,children:Object(a.jsx)(K,{})}),Object(a.jsx)(T,{xs:12,sm:3,children:Object(a.jsx)("div",{className:e("online"),children:Object(a.jsx)(ee,{})})})]})})})}}]),n}(s.a.Component)),ne=function(){function e(){Object(o.a)(this,e),this.listeners={}}return Object(u.a)(e,[{key:"subscribe",value:function(e,t){Array.isArray(this.listeners[e])?this.listeners[e].push(t):this.listeners[e]=[t]}},{key:"unsubscribe",value:function(e,t){if(this.listeners[e]){var n=this.listeners[e].findIndex((function(e){return e===t}));-1!==n&&this.listeners[e].splice(n,1),0===this.listeners[e].length&&delete this.listeners[e]}}},{key:"dispatch",value:function(e,t){this.listeners[e]&&this.listeners[e].forEach((function(e){e(t)}))}}]),e}(),ae=function(){function e(t,n){Object(o.a)(this,e),this.x=t,this.y=n}return Object(u.a)(e,[{key:"isEqual",value:function(e){return this.x===e.x&&this.y===e.y}}],[{key:"isEquals",value:function(e,t){return e.x===t.x&&e.y===t.y}}]),e}(),ce=s.a.createContext({lineColor:"green",lineWidth:5,width:1280,height:688,scale:1,isDrawing:!1,startDraw:function(){},endDraw:function(){},movePen:function(){},drawLine:function(){},setScale:function(){},setLineWidth:function(){},setColor:function(){},subscription:new ne,contextRef:null});ce.displayName="Canvas";var se=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).canvasRef=s.a.createRef(),e.ctx=null,e.subscription=new ne,e.lastDrawTime=0,e.lastPoint=new ae(0,0),e.state={lineColor:"green",lineWidth:5,width:1280,height:688,scale:1,isDrawing:!1},e.setIsDrawing=function(t){e.setState({isDrawing:t})},e.setLineWidth=function(t){e.setState({lineWidth:t})},e.setScale=function(t){e.setState({scale:t})},e.setColor=function(t){e.setState({lineColor:t})},e.drawLine=function(t,n,a,c){e.ctx&&(e.ctx.strokeStyle=t,e.ctx.lineWidth=n,e.ctx.beginPath(),e.ctx.moveTo(a.x,a.y),e.ctx.lineTo(c.x,c.y),e.ctx.stroke())},e.movePen=function(t){if(e.ctx&&e.state.isDrawing&&Date.now()-e.lastDrawTime>10){var n=new ae(t.nativeEvent.offsetX,t.nativeEvent.offsetY);e.draw(n)}},e.draw=function(t){var n=new ae(e.lastPoint.x*e.state.scale,e.lastPoint.y*e.state.scale),a=new ae(t.x*e.state.scale,t.y*e.state.scale);e.drawLine(e.state.lineColor,e.state.lineWidth,n,a),e.subscription.dispatch("draw",{lineColor:e.state.lineColor,lineWidth:e.state.lineWidth,from:n,to:a}),e.lastPoint=new ae(t.x,t.y),e.lastDrawTime=Date.now()},e.startDraw=function(t){var n=new ae(t.nativeEvent.offsetX,t.nativeEvent.offsetY);e.lastPoint=n,e.setIsDrawing(!0),e.subscription.dispatch("startDraw",{x:n.x*e.state.scale,y:n.y*e.state.scale})},e.endDraw=function(t){e.setIsDrawing(!1);var n=new ae(t.offsetX,t.offsetY);e.lastPoint.isEqual(n)&&e.draw(n),e.subscription.dispatch("endDraw",{x:n.x*e.state.scale,y:n.y*e.state.scale})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.canvasRef.current&&(this.ctx=this.canvasRef.current.getContext("2d"),this.canvasRef.current.width=this.state.width,this.canvasRef.current.height=this.state.height,this.canvasRef.current.style.touchAction="none",this.ctx&&(this.ctx.lineWidth=this.state.lineWidth,this.ctx.lineCap="round",this.ctx.lineJoin="round")),document.documentElement.addEventListener("pointerup",this.endDraw)}},{key:"componentDidUpdate",value:function(){this.canvasRef.current&&(this.ctx=this.canvasRef.current.getContext("2d"),this.ctx&&(this.ctx.lineWidth=this.state.lineWidth,this.ctx.lineCap="round",this.ctx.lineJoin="round"))}},{key:"componentWillUnmount",value:function(){document.documentElement.removeEventListener("pointerup",this.endDraw)}},{key:"render",value:function(){return Object(a.jsx)(ce.Provider,{value:Object(j.a)(Object(j.a)({},this.state),{},{subscription:this.subscription,drawLine:this.drawLine,setScale:this.setScale,setLineWidth:this.setLineWidth,setColor:this.setColor,canvasRef:this.canvasRef,contextRef:this.ctx,movePen:this.movePen,startDraw:this.startDraw,endDraw:this.endDraw}),children:this.props.children})}}]),n}(s.a.Component),re=(n(65),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).context=void 0,e.wrapperRef=s.a.createRef(),e.canvasRef=s.a.createRef(),e.resize=function(){var t=e.context.width/e.wrapperRef.current.clientWidth;e.context.setScale(t)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.resize(),window.addEventListener("resize",this.resize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resize)}},{key:"render",value:function(){var e=N("scalableCanvas");return Object(a.jsx)("div",{className:e(),ref:this.wrapperRef,children:Object(a.jsx)("canvas",{ref:this.context.canvasRef,width:this.context.width,height:.53*this.context.width,onPointerMove:this.context.movePen,onPointerDown:this.context.startDraw,children:this.props.children||"Your browser doesn't support canvas!"})})}}]),n}(s.a.Component));re.contextType=ce;var ie=re,oe=(n(66),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).context=void 0,e.changeLineWidth=function(t){e.context.setLineWidth(t)},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=N("sceneCanvas");return Object(a.jsxs)("div",{className:t(),children:[Object(a.jsx)(ie,{}),Object(a.jsx)("div",{className:t("lineWidth"),children:Object(a.jsx)("div",{className:t("widthSelectors"),children:[5,10,15].map((function(n){return Object(a.jsx)("div",{className:t("widthSelector",{width:n}),onClick:function(){return e.changeLineWidth(n)},children:Object(a.jsx)("span",{className:t("widthPicker",{active:n===e.context.lineWidth}),style:{backgroundColor:e.context.lineColor,height:n,width:n}})},n)}))})})]})}}]),n}(s.a.Component));oe.contextType=ce;var ue=oe,le=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).bufferPath=[],e.broadcastTimerID=void 0,e.onStartDraw=function(){e.broadcastTimerID=setInterval(e.broadcastPath,10)},e.onDraw=function(t){e.bufferPath.push(t)},e.onRecieveDraw=function(t){var n=t.data;n.author.id!==e.props.user.user.id&&n.paths.forEach((function(t){e.props.canvas.drawLine(t.lineColor,t.lineWidth,t.from,t.to)}))},e.broadcastPath=function(){var t;if(0!==e.bufferPath.length){var n={author:e.props.user.user,paths:e.bufferPath};null===(t=e.props.user.api)||void 0===t||t.send("draw",n),e.bufferPath=[],e.props.canvas.isDrawing||clearInterval(e.broadcastTimerID)}},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e;this.props.canvas.setColor(this.props.user.user.color),this.props.canvas.subscription.subscribe("startDraw",this.onStartDraw),this.props.canvas.subscription.subscribe("draw",this.onDraw),null===(e=this.props.user.api)||void 0===e||e.subscribe("draw",this.onRecieveDraw)}},{key:"componentWillUnmount",value:function(){var e;this.props.canvas.subscription.unsubscribe("startDraw",this.onStartDraw),this.props.canvas.subscription.unsubscribe("draw",this.onDraw),null===(e=this.props.user.api)||void 0===e||e.unsubscribe("draw",this.onRecieveDraw)}},{key:"render",value:function(){return Object(a.jsx)(ue,{})}}]),n}(s.a.Component),he=(n(67),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=N("canvasPage");return Object(a.jsx)("div",{className:e(),children:Object(a.jsx)(k,{maxWidth:"xl",children:Object(a.jsxs)(I,{children:[Object(a.jsx)(T,{xs:12,sm:9,children:Object(a.jsx)(se,{children:Object(a.jsx)(f.Consumer,{children:function(e){return Object(a.jsx)(ce.Consumer,{children:function(t){return Object(a.jsx)(le,{user:e,canvas:t})}})}})})}),Object(a.jsx)(T,{xs:12,sm:3,children:Object(a.jsx)("div",{className:e("online"),children:Object(a.jsx)(ee,{})})})]})})})}}]),n}(s.a.Component)),je=(n(68),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.type,n=void 0===t?"text":t,c=e.className,s=e.invalid,r=e.label,i=e.helpMessage,o=Object(y.a)(e,["type","className","invalid","label","helpMessage"]),u=N("input");return Object(a.jsxs)("label",{className:u("label",{hasLabel:Boolean(r)}),children:[Object(a.jsxs)("div",{className:u("fieldWrapper"),children:[r&&Object(a.jsx)("span",{className:u("labelText"),children:r}),Object(a.jsx)("input",Object(j.a)({type:n,className:Object(D.a)(c,u({type:n,invalid:s}))},o))]}),s&&i&&Object(a.jsx)("small",{className:u("helpMessage"),children:i})]})}}]),n}(s.a.Component)),de=["#ffd04e","#ec7380","#77dd77","#50bade","#ffe5b4","#d191f9","#3a9ff1","#ffc2ce"],be=(n(69),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=N("colorSelector"),t=this.props,n=t.className,c=t.value,s=t.width,r=t.height,i=Object(y.a)(t,["className","value","width","height"]);return Object(a.jsx)("fieldset",{className:Object(D.a)(n,e()),children:de.map((function(t){return Object(a.jsxs)("label",{className:e("label"),style:{width:s},children:[Object(a.jsx)("input",Object(j.a)({type:"radio",className:e("input"),value:t,checked:t===c},i)),Object(a.jsx)("span",{className:e("colorSquare"),style:{backgroundColor:t,height:r}})]},t)}))})}}]),n}(s.a.PureComponent));be.defaultProps={name:"color",width:"25%",height:50};var ve=be,pe=(n(70),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=N("button"),t=this.props,n=t.className,c=t.color,s=Object(y.a)(t,["className","color"]);return Object(a.jsx)("button",Object(j.a)({className:Object(D.a)(n,e({color:c}))},s))}}]),n}(s.a.PureComponent));pe.defaultProps={color:"primary"};var fe=pe,Oe=(n(71),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=N("authForm");return Object(a.jsxs)(G.a,{className:e({fetching:this.props.isFetching}),children:[Object(a.jsx)("div",{className:e("fieldGroup"),children:Object(a.jsx)(je,{name:"name",type:"text",label:"Your Name",placeholder:"Naruto Uzumaki",className:e("field"),onChange:this.props.handleChange,onBlur:this.props.handleBlur,value:this.props.values.name,invalid:Boolean(this.props.touched.name&&this.props.errors.name),helpMessage:this.props.errors.name})}),Object(a.jsx)("div",{className:e("fieldGroup"),children:Object(a.jsx)(ve,{onChange:this.props.handleChange,value:this.props.values.color,height:62.5})}),Object(a.jsx)("div",{className:e("fieldGroup"),children:Object(a.jsx)(fe,{type:"submit",children:"Sign In"})})]})}}]),n}(s.a.Component)),xe=function(e,t){var n=e+Math.random()*(t+1-e);return Math.floor(n)},me=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).context=void 0,e}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsx)(G.b,{initialValues:{name:"",color:de[xe(0,de.length-1)]},onSubmit:function(t){if(!e.context.isFetching){var n={name:t.name.trim(),color:t.color};e.context.signin(n)}},validate:function(e){var t={};return e.name.trim()||(t.name="User Name is empty!"),t},children:function(t){return Object(a.jsx)(Oe,Object(j.a)(Object(j.a)({},t),{},{isFetching:e.context.isFetching}))}})}}]),n}(s.a.Component);me.contextType=f;var ye=me,ge=(n(72),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).context=void 0,e.imageRef=s.a.createRef(),e.onLoadImage=function(){var t,n,a=null===(t=e.context.canvasRef)||void 0===t||null===(n=t.current)||void 0===n?void 0:n.getContext("2d");a&&a.drawImage(e.imageRef.current,0,0,e.context.width,e.context.height)},e}return Object(u.a)(n,[{key:"render",value:function(){var e=N("welcomeCanvas");return Object(a.jsx)("div",{className:e(),children:Object(a.jsx)(ie,{children:Object(a.jsx)("img",{ref:this.imageRef,src:"".concat("https://checnev.github.io/ws-chat-canvas","/images/welcome.png"),alt:"Hello :)",onLoad:this.onLoadImage})})})}}]),n}(s.a.Component));ge.contextType=ce;var we=ge,Ce=(n(73),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).context=void 0,e}return Object(u.a)(n,[{key:"render",value:function(){var e=N("mainPage");return Object(a.jsx)("div",{className:e(),children:Object(a.jsx)(k,{maxWidth:"xl",children:Object(a.jsxs)(I,{children:[Object(a.jsxs)(T,{xs:12,sm:4,md:3,children:[Object(a.jsx)("h1",{className:e("h1"),children:"WS Chat & Canvas"}),this.context.user?Object(a.jsxs)("div",{className:e("welcomeText"),children:["Hi ",this.context.user.name]}):Object(a.jsxs)("div",{className:e("form"),children:[Object(a.jsx)("div",{className:e("formTitle"),children:"Sign in"}),Object(a.jsx)(ye,{})]})]}),Object(a.jsx)(T,{xs:12,sm:8,md:9,children:Object(a.jsx)(se,{children:Object(a.jsx)(we,{})})})]})})})}}]),n}(s.a.Component));Ce.contextType=f;var Ne=Ce,ke=(n(74),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).context=void 0,e}return Object(u.a)(n,[{key:"render",value:function(){var e=N("signinPage");return this.context.user?Object(a.jsx)(m.a,{to:"/chat"}):Object(a.jsx)("div",{className:e(),children:Object(a.jsx)(k,{maxWidth:"xl",alignItems:"center",justifyContent:"center",children:Object(a.jsxs)("div",{className:e("form"),children:[Object(a.jsx)("h1",{children:"Sign In"}),Object(a.jsx)(ye,{})]})})})}}]),n}(s.a.Component));ke.contextType=f;var De=ke,We=(n(75),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=N("notFoundPage");return Object(a.jsx)("div",{className:e(),children:Object(a.jsx)(k,{maxWidth:"xl",justifyContent:"center",alignItems:"center",children:Object(a.jsx)("h1",{children:"Page Not Found"})})})}}]),n}(s.a.Component)),Re=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"app",children:Object(a.jsx)(O,{children:Object(a.jsx)(x.a,{children:Object(a.jsxs)(m.d,{children:[Object(a.jsx)(m.b,{exact:!0,path:"/",children:Object(a.jsx)(B,{children:Object(a.jsx)(Ne,{})})}),Object(a.jsx)(w,{exact:!0,path:"/chat",children:Object(a.jsx)(B,{fixed:!0,children:Object(a.jsx)(te,{})})}),Object(a.jsx)(w,{exact:!0,path:"/canvas",children:Object(a.jsx)(B,{fixed:!0,children:Object(a.jsx)(he,{})})}),Object(a.jsx)(m.b,{exact:!0,path:"/signin",children:Object(a.jsx)(B,{children:Object(a.jsx)(De,{})})}),Object(a.jsx)(m.b,{path:"*",children:Object(a.jsx)(B,{fixed:!0,children:Object(a.jsx)(We,{})})})]})})})})}}]),n}(s.a.Component),Se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,77)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),s(e),r(e)}))};i.a.render(Object(a.jsx)(Re,{}),document.getElementById("root")),Se()}]),[[76,1,2]]]);
//# sourceMappingURL=main.40c018c5.chunk.js.map
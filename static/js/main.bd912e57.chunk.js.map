{"version":3,"sources":["lib/api/Request.ts","lib/api/WSApi.ts","lib/user/User.ts","context/user.tsx","containers/PrivateRoute/index.tsx","utils/cn.ts","components/common/Container/index.tsx","components/common/Menu/Menu/index.tsx","components/common/Menu/Item/index.tsx","components/blocks/Layout/Header/Menu/index.tsx","components/common/Grid/Row/index.tsx","components/common/Grid/Column/index.tsx","components/UserInfo/index.tsx","components/blocks/Layout/Header/index.tsx","components/blocks/Layout/Content/index.tsx","components/blocks/Layout/Footer/index.tsx","components/blocks/Layout/index.tsx","components/Chat/Dialog/Message/index.tsx","components/Chat/Dialog/index.tsx","containers/Chat/Dialog.tsx","components/Chat/Form/index.tsx","containers/Chat/Form.tsx","components/Chat/index.tsx","components/UserList/index.tsx","services/UserService.ts","containers/OnlineUserList/index.tsx","components/pages/Chat/index.tsx","lib/base/subscription.ts","lib/canvas/Point.ts","context/canvas.tsx","components/blocks/ScalableCanvas/index.tsx","components/blocks/SceneCanvas/index.tsx","containers/PublicCanvas/index.tsx","components/pages/Canvas/index.tsx","components/common/Field/index.tsx","constants/colors.ts","components/SelectColor/index.tsx","components/common/Button/index.tsx","components/AuthForm/index.tsx","utils/random.ts","containers/AuthForm/index.tsx","components/blocks/WelcomeCanvas/index.tsx","components/pages/Main/index.tsx","components/pages/SignIn/index.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Request","type","data","object","WSApi","ws","handlers","recieve","event","message","JSON","parse","isRequest","request","forEach","handler","error","this","WebSocket","process","addEventListener","Array","isArray","push","handlerIndex","findIndex","reqHandler","splice","length","subscribe","onceHandler","unsubscribe","send","stringify","instance","User","id","name","color","UserContext","React","createContext","user","api","signin","displayName","UserProvider","getInstance","once","req","setState","state","Provider","value","props","children","Component","PrivateRoute","context","otherProps","render","to","contextType","withNaming","e","m","v","Container","container","cn","styleProps","className","Menu","menu","clsx","orientation","role","defaultProps","MenuItem","menuItems","anchor","exact","HeaderMenu","menuWrapperRef","createRef","isOpen","toggleMenu","closeMenu","current","contains","target","document","documentElement","removeEventListener","ref","open","onClick","map","menuItem","activeClassName","GridRow","row","GridColumn","column","UserInfo","userInfo","style","backgroundColor","toUpperCase","Header","header","maxWidth","alignItems","xs","sm","Content","content","Footer","footer","justifyContent","Date","getFullYear","PureComponent","Layout","layout","fixed","Message","author","date","text","direction","toLocaleString","replace","Dialog","messagesRef","messages","scrollBy","top","scrollHeight","behavior","dialog","DialogContainer","recieveMessage","ChatForm","chatForm","placeholder","onChange","handleChange","onBlur","handleBlur","values","ChatFormContainer","sendMessage","initialValues","onSubmit","resetForm","validate","errors","Chat","chat","UserList","userList","users","UserService","fetch","mode","then","res","json","UserOnlineList","join","leave","leaveUser","leaveUserIndex","getAll","ChatPage","chatPage","OnlineUserList","Subscription","listeners","listener","listenerIndex","Point","x","y","point","point1","point2","CanvasContext","lineColor","lineWidth","width","height","scale","isDrawing","startDraw","endDraw","movePen","drawLine","setScale","setLineWidth","setColor","subscription","contextRef","CanvasProvider","canvasRef","ctx","lastDrawTime","lastPoint","setIsDrawing","from","strokeStyle","beginPath","moveTo","lineTo","stroke","now","newPoint","nativeEvent","offsetX","offsetY","draw","lastPointScale","newPointScale","dispatch","isEqual","getContext","touchAction","lineCap","lineJoin","ScalableCanvas","wrapperRef","resize","clientWidth","window","scalableCanvas","onPointerMove","onPointerDown","SceneCanvas","changeLineWidth","sceneCanvas","active","PublicCanvas","bufferPath","broadcastTimerID","onStartDraw","setInterval","broadcastPath","onDraw","path","onRecieveDraw","paths","canvas","clearInterval","CanvasPage","canvasPage","Consumer","Field","invalid","label","helpMessage","input","hasLabel","Boolean","colors","ColorSelector","colorSelector","checked","Button","button","AuthForm","form","touched","randomNumber","min","max","rand","Math","random","floor","AuthFormContainer","WelcomeCanvas","imageRef","onLoadImage","drawImage","welcomeCanvas","src","alt","onLoad","MainPage","mainPage","md","SignInPage","signinPage","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.bd912e57.chunk.js","sourcesContent":["class Request {\n  constructor(public type: string, public data?: any) {}\n\n  static isRequest(object: any) {\n    return object.type && typeof object.type === 'string';\n  }\n}\n\nexport default Request;\n","import Request from './Request';\n\ntype RequestHandler = (request: Request) => any;\n\nclass WSApi {\n  static instance: WSApi;\n\n  readonly ws;\n  private handlers: Record<string, RequestHandler[]> = {};\n\n  private constructor() {\n    this.ws = new WebSocket(process.env.REACT_APP_WS_URL as string);\n    this.ws.addEventListener('message', this.recieve);\n  }\n\n  static getInstance(): WSApi {\n    if (!WSApi.instance) {\n      WSApi.instance = new WSApi();\n    }\n\n    return WSApi.instance;\n  }\n\n  subscribe(type: string, handler: RequestHandler) {\n    if (Array.isArray(this.handlers[type])) {\n      this.handlers[type].push(handler);\n    } else {\n      this.handlers[type] = [handler];\n    }\n  }\n\n  unsubscribe(type: string, handler: RequestHandler) {\n    if (this.handlers[type]) {\n      const handlerIndex = this.handlers[type].findIndex((reqHandler) => reqHandler === handler);\n\n      if (handlerIndex !== -1) {\n        this.handlers[type].splice(handlerIndex, 1);\n      }\n\n      if (this.handlers[type].length === 0) {\n        delete this.handlers[type];\n      }\n    }\n  }\n\n  once(type: string, handler: RequestHandler) {\n    const onceHandler = (request: Request) => {\n      handler(request);\n\n      this.unsubscribe(type, onceHandler);\n    };\n\n    this.subscribe(type, onceHandler);\n  }\n\n  send(type: string, data?: any) {\n    const request = new Request(type, data);\n    this.ws.send(JSON.stringify(request));\n  }\n\n  private recieve = (event: MessageEvent) => {\n    try {\n      const message = JSON.parse(event.data);\n\n      if (Request.isRequest(message)) {\n        const request = new Request(message.type, message.data);\n\n        this.handlers[request.type].forEach((handler) => {\n          handler(request);\n        });\n      }\n    } catch (error) {\n    }\n  };\n}\n\nexport default WSApi;\n","import { Color } from 'constants/colors';\n\nexport interface IUser {\n  name: string;\n  color: Color;\n  id?: string;\n}\n\nclass User implements IUser {\n  constructor(\n    public readonly id: string,\n    public readonly name: string,\n    public color: Color\n  ) {}\n  \n}\n\nexport default User;\n","import React from 'react';\nimport WSApi from 'lib/api/WSApi';\nimport User, { IUser } from 'lib/user/User';\nimport type Request from 'lib/api/Request';\n\ninterface IUserContext {\n  user: User | null;\n  api: WSApi | null;\n  signin: (user: IUser) => any;\n}\n\nexport const UserContext = React.createContext<IUserContext>({\n  user: null,\n  api: null,\n  signin: () => {},\n});\nUserContext.displayName = 'User';\n\nclass UserProvider extends React.Component<{}, IUserContext> {\n\n  signin = (user: IUser) => {\n\n    const api = WSApi.getInstance();\n\n    api.ws.addEventListener('open', () => {\n      api.once('signin', (req: Request) => {\n        const { id, name, color } = req.data;\n        const user = new User(id, name, color);\n\n        this.setState({\n          user,\n          api,\n        });\n      });\n\n      api.send('signin', user);\n    });\n  };\n\n\n  state = {\n    user: null,\n    api: null,\n    signin: this.signin,\n  }\n\n  render() {\n    return (\n      <UserContext.Provider value={this.state}>\n        {this.props.children}\n      </UserContext.Provider>\n    );\n  }\n}\n\nexport default UserProvider;\n","import React from 'react';\nimport { Route, Redirect, RouteProps } from 'react-router-dom';\nimport { UserContext } from 'context/user';\n\n\nclass PrivateRoute extends React.Component<RouteProps> {\n  static contextType = UserContext;\n  context!: React.ContextType<typeof UserContext>\n\n  render() {\n    const { children, ...otherProps } = this.props;\n\n    return (\n      <Route\n        {...otherProps}\n        render={() =>\n          this.context.user ? (\n            children\n          ) : (\n            <Redirect\n              to=\"/signin\"\n            />\n          )\n        }\n      />\n    );\n  }\n}\n\nexport default PrivateRoute;\n","import { withNaming  } from '@bem-react/classname';\n\nexport default withNaming({ e: '__', m: '_', v: '_' });\n","import React from 'react';\nimport cn from 'utils/cn';\nimport './index.scss';\n\nexport type JustifyContent = 'flex-start' | 'center' | 'flex-end' | 'space-around' | 'space-between';\nexport type AlignItems = 'flex-start' | 'center' | 'flex-end';\nexport type FlexWrap = 'nowrap' | 'wrap';\nexport type FlexDirection = 'row' | 'column';\nexport type BreakPoint = 'xs' | 'sm' | 'md' | 'lg' | 'xl' | 'xxl';\n\ninterface ContainerProps {\n  justifyContent?: JustifyContent;\n  alignItems?: AlignItems;\n  flexWrap?: FlexWrap;\n  flexDirection?: FlexDirection;\n  maxWidth?: BreakPoint;\n}\n\nclass Container extends React.Component<ContainerProps> {\n  render() {\n    const container = cn('container');\n    const { children, ...styleProps } = this.props;\n\n    return (\n      <div\n        className={container(styleProps as Record<string, string>)}\n      >\n        {children}\n      </div>\n    );\n  }\n}\n\nexport default Container;\n","import React from 'react';\nimport clsx from 'clsx';\nimport cn from 'utils/cn';\nimport './index.scss';\n\ninterface MenuProps {\n  className?: string;\n  orientation?: 'horizontal' | 'vertical';\n}\n\nclass Menu extends React.Component<MenuProps> {\n  static defaultProps: Pick<MenuProps, 'orientation'> = {\n    orientation: 'vertical',\n  };\n\n  render() {\n    const menu = cn('menu');\n    return (\n      <nav className={clsx(this.props.className, menu())}>\n        <ul\n          className={menu('items', { orientation: this.props.orientation })}\n          role=\"menu\"\n        >\n          {this.props.children}\n        </ul>\n      </nav>\n    );\n  }\n}\n\nexport default Menu;\n","import React from 'react';\nimport cn from 'utils/cn';\nimport './index.scss';\n\nclass MenuItem extends React.Component {\n\n  render() {\n    const menu = cn('menu');\n    return (\n      <li\n        {...this.props}\n        className={menu('item')}\n        role=\"menuitem\"\n      />\n    );\n  }\n}\n\nexport default MenuItem;\n","import React from 'react';\nimport cn from 'utils/cn';\nimport clsx from 'clsx';\nimport { Menu, MenuItem } from 'components/common/Menu';\nimport { NavLink } from 'react-router-dom';\nimport './index.scss';\n\nconst menuItems = [\n  { anchor: 'WS Chat & Canvas', to: '/', exact: true },\n  { anchor: 'Chat', to: '/chat' },\n  { anchor: 'Canvas', to: '/canvas' },\n];\n\ninterface HeaderMenuProps {\n  className?: string;\n}\n\ninterface HeaderMenuState {\n  isOpen: boolean;\n}\n\nclass HeaderMenu extends React.Component<HeaderMenuProps, HeaderMenuState> {\n  menuWrapperRef = React.createRef<HTMLDivElement>();\n\n  state = {\n    isOpen: false,\n  };\n\n  toggleMenu = () => {\n    this.setState((state) => ({\n      isOpen: !state.isOpen,\n    }));\n  };\n\n  closeMenu = (event: MouseEvent) => {\n    if (!this.menuWrapperRef.current!.contains(event.target as Node)) {\n      this.setState({ isOpen: false });\n    }\n  }\n\n  componentDidMount() {\n    document.documentElement.addEventListener('click', this.closeMenu);\n  }\n\n  componentWillUnmount() {\n    document.documentElement.removeEventListener('click', this.closeMenu);\n  }\n\n  render() {\n    const menu = cn('headerMenu');\n    return (\n      <div className={menu()} ref={this.menuWrapperRef}>\n        <div\n          className={menu('burger', { open: this.state.isOpen })}\n          onClick={this.toggleMenu}\n        >\n        </div>\n        <Menu\n          className={clsx(this.props.className, menu({ open: this.state.isOpen }))}\n          orientation=\"horizontal\"\n        >\n          {menuItems.map((menuItem) => (\n            <MenuItem key={menuItem.to}>\n              <NavLink\n                to={menuItem.to}\n                className={menu('link')}\n                activeClassName=\"menu__link_active\"\n                exact={menuItem.exact}\n              >\n                {menuItem.anchor}\n              </NavLink>\n            </MenuItem>\n          ))}\n        </Menu>\n      </div>\n    );\n  }\n}\n\nexport default HeaderMenu;\n","import React from 'react';\nimport cn from 'utils/cn';\nimport './index.scss';\nimport type { JustifyContent, AlignItems, FlexDirection } from 'components/common/Container';\n\ninterface GridRowProps {\n  justifyContent?: JustifyContent;\n  alignItems?: AlignItems;\n  flexDirection?: FlexDirection;\n}\n\nclass GridRow extends React.Component<GridRowProps> {\n\n  render() {\n    const row = cn('gridRow');\n    const { children, ...styleProps } = this.props;\n    return (\n      <div \n        className={\n          row(styleProps as Record<string, string>)\n        }\n      >\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nexport default GridRow;\n","import React from 'react';\nimport cn from 'utils/cn';\nimport type { BreakPoint } from 'components/common/Container';\nimport './index.scss';\n\ntype ColSize = 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12;\n\ntype GridColumnProps = {\n  [key in BreakPoint]?: ColSize;\n};\n\nclass GridColumn extends React.Component<GridColumnProps> {\n\n  render() {\n    const { children, ...styleProps } = this.props;\n    const column = cn('gridRow');\n\n    return (\n      <div\n        className={\n          column('column', styleProps as unknown as Record<string, number>)\n        }\n      >\n        {children}\n      </div>\n    );\n  }\n}\n\nexport default GridColumn;\n","import React from 'react';\nimport cn from 'utils/cn';\nimport clsx from 'clsx';\nimport './index.scss';\nimport { IUser } from 'lib/user/User';\n\ninterface UserInfoProps {\n  user: IUser;\n  className?: string;\n}\n\nclass UserInfo extends React.Component<UserInfoProps> {\n\n  render() {\n    const userInfo = cn('userInfo');\n\n    return (\n      <div\n        className={clsx(this.props.className, userInfo())}\n      >\n        <div\n          className={userInfo('avatar')}\n          style={{ backgroundColor: this.props.user.color }}\n        >\n          {this.props.user.name[0].toUpperCase()}\n        </div>\n        <span className={userInfo('username')}>{this.props.user.name}</span>\n      </div>\n    );\n  }\n}\n\nexport default UserInfo;\n","import React from 'react';\nimport cn from 'utils/cn';\nimport './index.scss';\nimport Container from 'components/common/Container';\nimport HeaderMenu from './Menu';\nimport { NavLink } from 'react-router-dom';\nimport { GridRow, GridColumn } from 'components/common/Grid';\nimport { UserContext } from 'context/user';\nimport UserInfo from 'components/UserInfo';\n\nclass Header extends React.Component {\n  static contextType = UserContext;\n  context!: React.ContextType<typeof UserContext>\n\n  render() {\n    const header = cn('header');\n    return (\n      <header className={header()}>\n        <Container maxWidth=\"xl\">\n          <GridRow alignItems=\"center\">\n            <GridColumn xs={6} sm={8}>\n              <HeaderMenu />\n            </GridColumn>\n            <GridColumn xs={6} sm={4}>\n              <div className={header('user')}>\n                {this.context.user\n                  ? <UserInfo user={this.context.user} />\n                  : (\n                    <NavLink\n                      to=\"/signin\"\n                      className={header('signinLink')}\n                    >\n                      Sign In\n                    </NavLink>\n                  )\n                }\n              </div>\n            </GridColumn>\n          </GridRow>\n        </Container>\n      </header>\n    );\n  }\n}\n\nexport default Header;\n","import React from 'react';\nimport cn from 'utils/cn';\nimport './index.scss';\n\n\nclass Content extends React.Component {\n  render() {\n    const content = cn('content');\n    return <div className={content()}>{this.props.children}</div>;\n  }\n}\n\nexport default Content;\n","import React from 'react';\nimport cn from 'utils/cn';\nimport Container from 'components/common/Container';\nimport './index.scss';\n\nclass Footer extends React.PureComponent {\n  render() {\n    const footer = cn('footer');\n\n    return (\n      <div className={footer()}>\n        <Container\n          maxWidth=\"xl\"\n          justifyContent=\"flex-end\"\n        >\n          WS Chat & Canvas {new Date().getFullYear()}.\n        </Container>      \n      </div>\n    );\n  }\n}\n\nexport default Footer;\n","import React from 'react';\nimport cn from 'utils/cn';\nimport Header from './Header';\nimport Content from './Content';\nimport Footer from './Footer';\nimport './index.scss';\n\ninterface LayoutProps {\n  fixed?: boolean;\n}\n\nclass Layout extends React.Component<LayoutProps> {\n\n  render() {\n    const layout = cn('layout');\n    const { fixed } = this.props;\n    return (\n      <div className={layout({ fixed })}>\n        <Header />\n        <Content>{this.props.children}</Content>\n        <Footer />\n      </div>\n    );\n  }\n}\n\nexport default Layout;\n","import React from 'react';\nimport cn from 'utils/cn';\nimport UserInfo from 'components/UserInfo';\nimport type { IUser } from 'lib/user/User';\n\nimport './index.scss';\n\nexport interface IMessage {\n  id: number;\n  author: IUser;\n  text: string;\n  date: Date;\n}\n\ninterface MessageProps {\n  message: IMessage;\n  direction: 'in' | 'out';\n}\n\nclass Message extends React.Component<MessageProps> {\n  render() {\n    const message = cn('message');\n    const { author, date, text } = this.props.message;\n    return (\n      <div\n        className={\n          message({ direction: this.props.direction })\n        }\n      >\n        <div className={message('text')}>\n          {text}\n        </div>\n        <div className={message('author')}>\n          <UserInfo user={author} />\n          <span className={message('date')}>\n            {date.toLocaleString().replace(',', '')}\n          </span>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Message;\n","import React from 'react';\nimport cn from 'utils/cn';\nimport Message, { IMessage } from './Message';\nimport './index.scss';\nimport type User from 'lib/user/User';\n\ninterface DialogProps {\n  messages: IMessage[];\n  user: User;\n}\n\nclass Dialog extends React.Component<DialogProps> {\n  messagesRef = React.createRef<HTMLDivElement>();\n\n  componentDidUpdate() {\n    const messages = this.messagesRef.current;\n\n    messages?.scrollBy({\n      top: messages.scrollHeight,\n      behavior: 'smooth',\n    });\n  }\n\n  render() {\n    const dialog = cn('dialog');\n\n    return (\n      <div className={dialog()}>\n        <div className={dialog('window')}>\n          <div className={dialog('messages')} ref={this.messagesRef}>\n            {this.props.messages.map((message) => (\n              <Message\n                key={message.id}\n                direction={message.author.id === this.props.user.id ? 'out' : 'in'}\n                message={message}\n              />\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Dialog;\n","import React from 'react';\nimport { UserContext } from 'context/user';\nimport Dialog from 'components/Chat/Dialog';\nimport type { IMessage } from 'components/Chat/Dialog/Message';\nimport type Request from 'lib/api/Request';\n\ninterface DialogContainerState {\n  messages: IMessage[];\n}\n\nclass DialogContainer extends React.Component<{}, DialogContainerState> {\n  static contextType = UserContext;\n  context!: React.ContextType<typeof UserContext>\n\n  state = {\n    messages: [],\n  };\n\n  recieveMessage = (req: Request) => {\n    this.setState((state) => {\n      const message = req.data;\n      message.date = new Date(message.date);\n\n      return { messages: [...state.messages, req.data] };\n    });\n  };\n\n  componentDidMount() {\n    this.context.api?.subscribe('chat', this.recieveMessage);\n  }\n\n  componentWillUnmount() {\n    this.context.api?.unsubscribe('chat', this.recieveMessage);\n  }\n\n  render() {\n    return <Dialog messages={this.state.messages} user={this.context.user!} />;\n  }\n}\n\nexport default DialogContainer;\n","import React from 'react';\nimport cn from 'utils/cn';\nimport { Form, FormikProps } from 'formik';\nimport './index.scss';\n\nexport interface ChatFormValues {\n  text: string;\n}\n\ntype ChatFormProps = FormikProps<ChatFormValues>;\n\nclass ChatForm extends React.Component<ChatFormProps> {\n\n  render() {\n    const chatForm = cn('chatForm');\n    return (\n      <Form\n        className={chatForm()}\n      >\n        <textarea\n          name=\"text\"\n          placeholder=\"What's new ?\"\n          onChange={this.props.handleChange}\n          onBlur={this.props.handleBlur}\n          value={this.props.values.text}\n        />\n        <button\n          type=\"submit\"\n          className={chatForm('submit')}\n        />\n      </Form>\n    );\n  }\n}\n\nexport default ChatForm;\n","import React from 'react';\nimport { Formik, FormikErrors, FormikProps } from 'formik';\nimport ChatForm, { ChatFormValues } from 'components/Chat/Form';\nimport { UserContext } from 'context/user';\n\nclass ChatFormContainer extends React.Component {\n  static contextType = UserContext;\n  context!: React.ContextType<typeof UserContext>\n\n  sendMessage = (text: string) => {\n    this.context.api?.send(\n      'chat',\n      {\n        author: this.context.user,\n        date: new Date(),\n        text,\n      }\n    );\n  }\n\n  render() {\n    return (\n      <Formik\n        initialValues={{\n          text: '',\n        }}\n        onSubmit={(values: ChatFormValues, { resetForm }) => {\n          this.sendMessage(values.text);\n          resetForm();\n        }}\n        validate={(values: ChatFormValues) => {\n          const errors: FormikErrors<ChatFormValues> = {};\n\n          if (!values.text) {\n            errors.text = 'Text is empty!';\n          }\n\n          return errors;\n        }}\n      >\n        {(props: FormikProps<ChatFormValues>) => <ChatForm {...props} />}\n      </Formik>\n    );\n  }\n}\n\nexport default ChatFormContainer;\n","import React from 'react';\nimport cn from 'utils/cn';\nimport { GridRow, GridColumn } from 'components/common/Grid';\nimport { Dialog, Form } from 'containers/Chat';\nimport './index.scss';\n\n\nclass Chat extends React.Component {\n  render() {\n    const chat = cn('chat');\n    return (\n      <div className={chat()}>\n        <GridRow>\n          <GridColumn xs={12}>\n            <Dialog />\n            <Form />\n          </GridColumn>\n        </GridRow>\n      </div>\n    );\n  }\n}\n\nexport default Chat;\n","import React from 'react';\nimport cn from 'utils/cn';\nimport clsx from 'clsx';\nimport UserInfo from 'components/UserInfo';\nimport './index.scss';\nimport type { IUser } from 'lib/user/User';\n\ninterface UserListProps {\n  users: IUser[];\n  className?: string;\n}\n\nclass UserList extends React.Component<UserListProps> {\n  render() {\n    const userList = cn('userList');\n\n    return (\n      <ul className={clsx(this.props.className, userList())}>\n        {this.props.users.map((user) => (\n          <li key={user.name}>\n            <UserInfo user={user} />\n          </li>\n        ))}\n      </ul>\n    );\n  }\n}\n\nexport default UserList;\n","import type { IUser } from 'lib/user/User';\n\nclass UserService {\n  static getAll(): Promise<IUser[]> {\n    return fetch(\n      `${process.env.REACT_APP_BACKEND_URL}/users`,\n      {\n        mode: 'cors',\n      }\n    )\n    .then((res) => res.json()); \n  }\n}\n\nexport default UserService;\n","import React from 'react';\nimport UserList from 'components/UserList';\nimport { UserContext } from 'context/user';\nimport UserService from 'services/UserService';\nimport type { IUser } from 'lib/user/User';\nimport type Request from 'lib/api/Request';\n\ninterface UserOnlineListState {\n  users: IUser[];\n}\n\nclass UserOnlineList extends React.Component<{}, UserOnlineListState> {\n  static contextType = UserContext;\n  context!: React.ContextType<typeof UserContext>\n\n  state = {\n    users: [],\n  };\n\n  join = (req: Request) => {\n    const user: IUser = req.data;\n\n    this.setState((state) => ({\n      users: [...state.users, user]\n    }));\n  };\n\n  leave = (req: Request) => {\n    const leaveUser: IUser = req.data;\n    this.setState((state) => {\n      const leaveUserIndex = state.users.findIndex((user) => user.id === leaveUser.id);\n\n      if (leaveUserIndex !== -1) {\n        state.users.splice(leaveUserIndex, 1);\n        return {\n          users: [...state.users]\n        };\n      }\n    });\n  };\n\n  componentDidMount() {\n    UserService.getAll().then((users) => {\n      this.setState({ users });\n    });\n\n    this.context.api?.subscribe('join', this.join);\n    this.context.api?.subscribe('leave', this.leave);\n  }\n\n  componentWillUnmount() {\n    this.context.api?.unsubscribe('join', this.join);\n    this.context.api?.unsubscribe('leave', this.leave);\n  }\n\n  render() {\n    return <UserList users={this.state.users} />\n  }\n}\n\nexport default UserOnlineList;\n","import React from 'react';\nimport cn from 'utils/cn';\nimport Container from 'components/common/Container';\nimport { GridRow, GridColumn } from 'components/common/Grid';\nimport Chat from 'components/Chat'\nimport OnlineUserList from 'containers/OnlineUserList';\nimport './index.scss';\n\nclass ChatPage extends React.Component {\n  \n  render() {\n    const chatPage = cn('chatPage');\n    return (\n      <div className={chatPage()}>\n        <Container maxWidth=\"xl\">\n          <GridRow>\n            <GridColumn xs={12} sm={9}>\n              <Chat />\n            </GridColumn>\n            <GridColumn xs={12} sm={3}>\n              <div className={chatPage('online')}>\n                <OnlineUserList />\n              </div>\n            </GridColumn>\n          </GridRow>\n        </Container>\n      </div>\n    );\n  }\n}\n\nexport default ChatPage;\n","type Listener = (data?: any) => any;\n\nclass Subscription {\n  private listeners: Record<string, Listener[]> = {};\n\n  subscribe(event: string, listener: Listener) {\n    if (Array.isArray(this.listeners[event])) {\n      this.listeners[event].push(listener);\n    } else {\n      this.listeners[event] = [listener];\n    }\n  }\n\n  unsubscribe(event: string, listener: Listener) {\n    if (this.listeners[event]) {\n      const listenerIndex = this.listeners[event].findIndex((handler) => handler === listener);\n\n      if (listenerIndex !== -1) {\n        this.listeners[event].splice(listenerIndex, 1);\n      }\n\n      if (this.listeners[event].length === 0) {\n        delete this.listeners[event];\n      }\n    }\n  }\n\n  dispatch(event: string, data?: any) {\n    if (this.listeners[event]) {\n      this.listeners[event].forEach((listener) => {\n        listener(data);\n      });\n    }\n  }\n}\n\nexport default Subscription;\n","export interface IPoint {\n  x: number;\n  y: number;\n}\n\nclass Point implements IPoint {\n  constructor(public readonly x: number, public readonly y: number) {}\n\n  isEqual(point: IPoint): boolean {\n    return this.x === point.x && this.y === point.y;\n  }\n\n  static isEquals(point1: IPoint, point2: IPoint): boolean {\n    return point1.x === point2.x && point1.y === point2.y;\n  }\n}\n\nexport default Point;\n","import React from 'react';\nimport Subscription from 'lib/base/subscription';\nimport Point, { IPoint } from 'lib/canvas/Point';\n\ninterface ICanvasContext {\n  lineColor: string;\n  lineWidth: number;\n  width: number;\n  height: number;\n  scale: number;\n  isDrawing: boolean;\n\n  startDraw: (event: React.PointerEvent<HTMLCanvasElement>) => void;\n  endDraw: (event: PointerEvent) => void;\n  movePen: (event: React.PointerEvent<HTMLCanvasElement>) => void;\n  drawLine: (color: string, lineWidth: number, from: IPoint, to: IPoint) => void;\n  setScale: (scale: number) => void;\n  setLineWidth: (width: number) => void;\n  setColor: (color: string) => void;\n\n  subscription: Subscription;\n\n  contextRef: CanvasRenderingContext2D | null;\n  canvasRef?: React.RefObject<HTMLCanvasElement>;\n}\n\ntype CanvasProviderState = Pick<ICanvasContext, 'lineColor' | 'lineWidth' | 'width' | 'height' | 'scale' | 'isDrawing'>;\n\nexport const CanvasContext = React.createContext<ICanvasContext>({\n  lineColor: 'green',\n  lineWidth: 5,\n  width: 1280,\n  height: 688,\n  scale: 1,\n  isDrawing: false,\n  startDraw: () => {},\n  endDraw: () => {},\n  movePen: () => {},\n  drawLine: () => {},\n  setScale: () => {},\n  setLineWidth: () => {},\n  setColor: () => {},\n  subscription: new Subscription(),\n  contextRef: null,\n});\nCanvasContext.displayName = 'Canvas';\n\n\nclass CanvasProvider extends React.Component<{}, CanvasProviderState> {\n  canvasRef = React.createRef<HTMLCanvasElement>();\n  ctx: CanvasRenderingContext2D | null = null;\n  subscription = new Subscription();\n\n  private lastDrawTime: number = 0;\n  private lastPoint = new Point(0, 0);\n\n  state = {\n    lineColor: 'green',\n    lineWidth: 5,\n    width: 1280,\n    height: 688,\n    scale: 1,\n    isDrawing: false,\n  };\n\n  setIsDrawing = (isDrawing: boolean) => {\n    this.setState({ isDrawing });\n  };\n\n  setLineWidth = (lineWidth: number) => {\n    this.setState({ lineWidth });\n  };\n\n  setScale = (scale: number) => {\n    this.setState({ scale });\n  };\n\n  setColor = (lineColor: string) => {\n    this.setState({ lineColor });\n  };\n\n  drawLine = (color: string, lineWidth: number, from: IPoint, to: IPoint) => {\n    if (this.ctx) {\n      this.ctx.strokeStyle = color;\n      this.ctx.lineWidth = lineWidth;\n\n      this.ctx.beginPath();\n      this.ctx.moveTo(from.x, from.y);\n      this.ctx.lineTo(to.x, to.y);\n      this.ctx.stroke();\n    }\n  };\n\n  componentDidMount() {\n    if (this.canvasRef.current) {\n      this.ctx = this.canvasRef.current.getContext('2d');\n\n      this.canvasRef.current!.width = this.state.width;\n      this.canvasRef.current!.height = this.state.height;\n      this.canvasRef.current!.style.touchAction = 'none';\n\n      if (this.ctx) {\n        this.ctx.lineWidth = this.state.lineWidth;\n        this.ctx.lineCap = 'round';\n        this.ctx.lineJoin = 'round';\n      }\n    }\n\n    document.documentElement.addEventListener('pointerup', this.endDraw);\n  }\n\n  componentDidUpdate() {\n    if (this.canvasRef.current) {\n      this.ctx = this.canvasRef.current.getContext('2d');\n\n      if (this.ctx) {\n        this.ctx.lineWidth = this.state.lineWidth;\n        this.ctx.lineCap = 'round';\n        this.ctx.lineJoin = 'round';\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    document.documentElement.removeEventListener('pointerup', this.endDraw);\n  }\n\n  movePen = (event: React.PointerEvent<HTMLCanvasElement>) => {\n    if (this.ctx && this.state.isDrawing) {\n      if (Date.now() - this.lastDrawTime > 10) {\n        const newPoint = new Point(event.nativeEvent.offsetX, event.nativeEvent.offsetY);\n        this.draw(newPoint);\n      }\n    }\n  };\n\n  private draw = (newPoint: Point) => {\n    // if (this.ctx && this.state.isDrawing) {\n    //   if (Date.now() - this.lastDrawTime > 10) {\n\n        const lastPointScale = new Point(\n          this.lastPoint.x * this.state.scale,\n          this.lastPoint.y * this.state.scale\n        );\n\n        const newPointScale = new Point(\n          newPoint.x * this.state.scale,\n          newPoint.y * this.state.scale,\n        );\n\n        this.drawLine(this.state.lineColor, this.state.lineWidth, lastPointScale, newPointScale);\n\n        this.subscription.dispatch('draw', {\n          lineColor: this.state.lineColor,\n          lineWidth: this.state.lineWidth,\n          from: lastPointScale,\n          to: newPointScale,\n        });\n\n        this.lastPoint = new Point(newPoint.x, newPoint.y);\n        this.lastDrawTime = Date.now();\n    //   }\n    // }\n  };\n\n  startDraw = (event: React.PointerEvent<HTMLCanvasElement>) => {\n    const point = new Point(event.nativeEvent.offsetX, event.nativeEvent.offsetY);\n    this.lastPoint = point;\n    this.setIsDrawing(true);\n\n    this.subscription.dispatch('startDraw', {\n      x: point.x * this.state.scale,\n      y: point.y * this.state.scale,\n    });\n  };\n\n  endDraw = (event: PointerEvent) => {\n    this.setIsDrawing(false);\n\n    const point = new Point(event.offsetX, event.offsetY);\n\n    if (this.lastPoint.isEqual(point)) {\n      this.draw(point);\n    }\n\n    this.subscription.dispatch('endDraw', {\n      x: point.x * this.state.scale,\n      y: point.y * this.state.scale,\n    });\n  };\n\n  render() {\n    return (\n      <CanvasContext.Provider value={{\n        ...this.state,\n        subscription: this.subscription,\n        drawLine: this.drawLine,\n        setScale: this.setScale,\n        setLineWidth: this.setLineWidth,\n        setColor: this.setColor,\n        canvasRef: this.canvasRef,\n        contextRef: this.ctx,\n        movePen: this.movePen,\n        startDraw: this.startDraw,\n        endDraw: this.endDraw,\n      }}>\n        {this.props.children}\n      </CanvasContext.Provider>\n    );\n  }\n}\n\nexport default CanvasProvider;\n","import React from 'react';\nimport { CanvasContext } from 'context/canvas';\nimport cn from 'utils/cn';\nimport './index.scss';\n\nexport class ScalableCanvas extends React.Component {\n  static contextType = CanvasContext;\n  context!: React.ContextType<typeof CanvasContext>\n\n  wrapperRef = React.createRef<HTMLDivElement>();\n  canvasRef = React.createRef<HTMLCanvasElement>();\n\n  componentDidMount() {\n    this.resize();\n    window.addEventListener('resize', this.resize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.resize);\n  }\n\n  resize = () => {\n    const scale = this.context.width / this.wrapperRef.current!.clientWidth;\n    this.context.setScale(scale);\n  };\n\n  render() {\n    const scalableCanvas = cn('scalableCanvas');\n    return (\n      <div\n        className={scalableCanvas()}\n        ref={this.wrapperRef}\n      >\n        <canvas\n          ref={this.context.canvasRef}\n          width={this.context.width}\n          height={this.context.width * 0.53}\n          onPointerMove={this.context.movePen}\n          onPointerDown={this.context.startDraw}\n        >\n          {this.props.children || `Your browser doesn't support canvas!`}\n        </canvas>\n      </div>\n    );\n  }\n}\n\nexport default ScalableCanvas;\n","import React from 'react';\nimport cn from 'utils/cn';\nimport ScalableCanvas from 'components/blocks/ScalableCanvas';\nimport { CanvasContext } from 'context/canvas';\nimport './index.scss';\n\n\nclass SceneCanvas extends React.Component {\n  static contextType = CanvasContext;\n  context!: React.ContextType<typeof CanvasContext>;\n\n  changeLineWidth = (width: number) => {\n    this.context.setLineWidth(width);\n  };\n\n  render() {\n    const sceneCanvas = cn('sceneCanvas');\n    return (\n      <div\n        className={sceneCanvas()}\n      >\n        <ScalableCanvas />\n        <div className={sceneCanvas('lineWidth')}>\n          <div className={sceneCanvas('widthSelectors')}>\n            {[5, 10, 15].map((width) => (\n              <div\n                key={width}\n                className={sceneCanvas('widthSelector', { width })}\n                onClick={() => this.changeLineWidth(width)}\n              >\n                <span\n                  className={sceneCanvas('widthPicker', { active: width === this.context.lineWidth })}\n                  style={{\n                    backgroundColor: this.context.lineColor,\n                    height: width,\n                    width,\n                  }}\n                />\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default SceneCanvas;\n","import React from 'react';\nimport SceneCanvas from 'components/blocks/SceneCanvas';\nimport { CanvasContext } from 'context/canvas';\nimport { UserContext } from 'context/user';\nimport type { IPoint } from 'lib/canvas/Point';\nimport type { IUser } from 'lib/user/User';\nimport type Request from 'lib/api/Request';\n\n\ninterface PublicCanvasProps {\n  user: React.ContextType<typeof UserContext>;\n  canvas: React.ContextType<typeof CanvasContext>;\n}\n\ninterface Path {\n  lineColor: string;\n  lineWidth: number;\n  from: IPoint;\n  to: IPoint;\n}\n\ninterface DrawMessage {\n  author: IUser;\n  paths: Path[];\n}\n\nclass PublicCanvas extends React.Component<PublicCanvasProps> {\n  bufferPath: Path[] = [];\n  broadcastTimerID?: NodeJS.Timeout;\n\n  onStartDraw = () => {\n    this.broadcastTimerID = setInterval(this.broadcastPath, 10);\n  };\n\n  onDraw = (path: Path) => {\n    this.bufferPath.push(path);\n  };\n\n  onRecieveDraw = (req: Request) => {\n    const { data } = req;\n\n    if (data.author.id !== this.props.user.user!.id) {\n      data.paths.forEach((path: Path) => {\n        this.props.canvas.drawLine(\n          path.lineColor,\n          path.lineWidth,\n          path.from,\n          path.to\n        );\n      });\n    }\n  };\n\n  broadcastPath = () => {\n    if (this.bufferPath.length === 0) return;\n\n    const data: DrawMessage = {\n      author: this.props.user.user!,\n      paths: this.bufferPath,\n    };\n\n    this.props.user.api?.send('draw', data);\n    this.bufferPath = [];\n\n    if (!this.props.canvas.isDrawing) {\n      clearInterval(this.broadcastTimerID!);\n    }\n  };\n\n  componentDidMount() {\n    this.props.canvas.setColor(this.props.user.user!.color);\n    this.props.canvas.subscription.subscribe('startDraw', this.onStartDraw);\n    this.props.canvas.subscription.subscribe('draw', this.onDraw);\n\n    this.props.user.api?.subscribe('draw', this.onRecieveDraw);\n  }\n\n  componentWillUnmount() {\n    this.props.canvas.subscription.unsubscribe('startDraw', this.onStartDraw);\n    this.props.canvas.subscription.unsubscribe('draw', this.onDraw);\n\n    this.props.user.api?.unsubscribe('draw', this.onRecieveDraw);\n  }\n\n  render() {\n    return <SceneCanvas />;\n  }\n}\n\nexport default PublicCanvas;\n","import React from 'react';\nimport cn from 'utils/cn';\nimport Container from 'components/common/Container';\nimport { GridRow, GridColumn } from 'components/common/Grid';\nimport OnlineUserList from 'containers/OnlineUserList';\nimport CanvasProvider from 'context/canvas';\nimport PublicCanvas from 'containers/PublicCanvas';\nimport { CanvasContext } from 'context/canvas';\nimport { UserContext } from 'context/user';\nimport './index.scss';\n\nclass CanvasPage extends React.Component {\n  render() {\n    const canvasPage = cn('canvasPage');\n\n    return (\n      <div className={canvasPage()}>\n        <Container maxWidth=\"xl\">\n          <GridRow>\n            <GridColumn xs={12} sm={9}>\n              <CanvasProvider>\n                <UserContext.Consumer>\n                  {user => (\n                    <CanvasContext.Consumer>\n                      {canvas => (\n                        <PublicCanvas user={user} canvas={canvas} />\n                      )}\n                    </CanvasContext.Consumer>\n                  )}\n                </UserContext.Consumer>\n              </CanvasProvider>\n            </GridColumn>\n            <GridColumn xs={12} sm={3}>\n              <div className={canvasPage('online')}>\n                <OnlineUserList />\n              </div>\n            </GridColumn>\n          </GridRow>\n        </Container>\n      </div>\n    )\n  }\n}\n\nexport default CanvasPage;\n","import React from 'react';\nimport clsx from 'clsx';\nimport cn from 'utils/cn';\nimport './index.scss';\n\ninterface FieldProps extends React.InputHTMLAttributes<HTMLInputElement> {\n  label?: string;\n  invalid?: boolean;\n  helpMessage?: string;\n}\n\nclass Field extends React.Component<FieldProps> {\n  render() {\n    const { \n      type = 'text',\n      className,\n      invalid,\n      label,\n      helpMessage,\n      ...props\n    } = this.props;\n    const input = cn('input');\n    return (\n      <label className={input('label', { hasLabel: Boolean(label) })}>\n        <div className={input('fieldWrapper')}>\n          {label && <span className={input('labelText')}>{label}</span>}\n          <input\n            type={type}\n            className={\n              clsx(className, input({ type, invalid }))\n            }\n            {...props}\n          />\n        </div>\n        {invalid && helpMessage && <small className={input('helpMessage')}>{helpMessage}</small>}\n      </label>\n    );\n  }\n}\n\nexport default Field;\n","export type Color = string;\nexport const colors: Color[] = [\n  '#ffd04e',\n  '#ec7380',\n  '#77dd77',\n  '#50bade',\n  '#ffe5b4',\n  '#d191f9',\n  '#3a9ff1',\n  '#ffc2ce',\n];\n","import React from 'react';\nimport cn from 'utils/cn';\nimport clsx from 'clsx';\nimport { colors } from 'constants/colors';\nimport './index.scss';\n\ninterface ColorSelectorProps extends React.InputHTMLAttributes<HTMLInputElement> {\n  width?: number | string;\n  height?: number | string;\n}\n\nclass ColorSelector extends React.PureComponent<ColorSelectorProps> {\n  static defaultProps: ColorSelectorProps = {\n    name: 'color',\n    width: '25%',\n    height: 50,\n  }\n  render() {\n    const colorSelector = cn('colorSelector');\n    const { className, value, width, height, ...props } = this.props; \n\n    return (\n      <fieldset className={clsx(className, colorSelector())}>\n        {colors.map((color) => (\n          <label className={colorSelector('label')} style={{ width }} key={color}>\n            <input\n              type=\"radio\"\n              className={colorSelector('input')}\n              value={color}\n              checked={color === value}\n              {...props}\n            />\n            <span \n              className={colorSelector('colorSquare')}\n              style={{\n                backgroundColor: color,\n                height,\n              }}\n            />\n          </label>\n        ))}\n      </fieldset>\n    )\n  }\n}\n\nexport default ColorSelector;\n","import React from 'react';\nimport cn from 'utils/cn';\nimport clsx from 'clsx';\nimport './index.scss';\n\nexport type Color = 'primary' | 'second';\n\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement>{\n  color?: Color;\n}\n\nclass Button extends React.PureComponent<ButtonProps> {\n  static defaultProps: ButtonProps = {\n    color: 'primary',\n  };\n\n  render() {\n    const button = cn('button');\n    const { className, color, ...props } = this.props;\n    \n    return (\n      <button\n        className={\n          clsx(className, button({ color }))\n        }\n        {...props}\n      />\n    );\n  }\n}\n\nexport default Button;\n","import React from 'react';\nimport cn from 'utils/cn';\nimport { Form, FormikProps } from 'formik';\nimport Field from 'components/common/Field';\nimport ColorSelector from 'components/SelectColor';\nimport Button from 'components/common/Button';\nimport './index.scss';\n\nexport interface AuthFormValues {\n  name: string;\n  color: string;\n}\n\ntype AuthFormProps = FormikProps<AuthFormValues>;\n\nclass AuthForm extends React.Component<AuthFormProps> {\n  render() {\n    const form = cn('authForm');\n    return (\n      <Form className={form()}>\n        <div className={form('fieldGroup')}>\n          <Field\n            name=\"name\"\n            type=\"text\"\n            label=\"Your Name\"\n            placeholder=\"Naruto Uzumaki\"\n            className={form('field')}\n            onChange={this.props.handleChange}\n            onBlur={this.props.handleBlur}\n            value={this.props.values.name}\n            invalid={Boolean(this.props.touched.name && this.props.errors.name)}\n            helpMessage={this.props.errors.name}\n          />\n        </div>\n        <div className={form('fieldGroup')}>\n          <ColorSelector \n            onChange={this.props.handleChange}\n            value={this.props.values.color}\n            height={62.5}\n          />\n        </div>\n        <div className={form('fieldGroup')}>\n          <Button type=\"submit\">Sign In</Button>\n        </div>\n      </Form>\n    );\n  }\n}\n\nexport default AuthForm;\n","export const randomNumber = (min: number, max: number) => {\n  const rand = min + Math.random() * (max + 1 - min);\n  return Math.floor(rand);\n};\n","import React from 'react';\nimport { Formik, FormikErrors, FormikProps } from 'formik';\nimport AuthForm, { AuthFormValues } from 'components/AuthForm';\nimport { UserContext } from 'context/user';\nimport { colors } from 'constants/colors';\nimport { randomNumber } from 'utils/random';\n\nclass AuthFormContainer extends React.Component {\n  static contextType = UserContext;\n  context!: React.ContextType<typeof UserContext>\n\n  render() {\n    return (\n      <Formik\n        initialValues={{\n          name: '',\n          color: colors[randomNumber(0, colors.length - 1)],\n        }}\n        onSubmit={(values: AuthFormValues) => {\n          const user = {\n            name: values.name,\n            color: values.color,\n          };\n\n          this.context.signin(user);\n        }}\n        validate={(values: AuthFormValues) => {\n          const errors: FormikErrors<AuthFormValues> = {};\n\n          if (!values.name) {\n            errors.name = 'User Name is empty!';\n          }\n\n          return errors;\n        }}\n      >\n        {(props: FormikProps<AuthFormValues>) => <AuthForm {...props} />}\n      </Formik>\n    );\n  }\n}\n\nexport default AuthFormContainer;\n","import React from 'react';\nimport cn from 'utils/cn';\nimport ScalableCanvas from 'components/blocks/ScalableCanvas';\nimport { CanvasContext } from 'context/canvas';\nimport './index.scss';\n\nclass WelcomeCanvas extends React.Component {\n  static contextType = CanvasContext;\n  context!: React.ContextType<typeof CanvasContext>\n\n  imageRef = React.createRef<HTMLImageElement>();\n\n  onLoadImage = () => {\n    const context = this.context.canvasRef?.current?.getContext('2d');\n\n    if (context) {\n      context.drawImage(this.imageRef.current!, 0, 0, this.context.width, this.context.height);\n    }\n  };\n\n  render() {\n    const welcomeCanvas = cn('welcomeCanvas');\n    return (\n      <div\n        className={welcomeCanvas()}\n      >\n        <ScalableCanvas>\n          <img\n            ref={this.imageRef}\n            src={`${process.env.PUBLIC_URL}/images/welcome.png`}\n            alt=\"Hello :)\"\n            onLoad={this.onLoadImage}\n          />\n        </ScalableCanvas>\n      </div>\n    );\n  }\n}\n\nexport default WelcomeCanvas;\n","import React from 'react';\nimport cn from 'utils/cn';\nimport Container from 'components/common/Container';\nimport { GridRow, GridColumn } from 'components/common/Grid';\nimport AuthForm from 'containers/AuthForm';\nimport CanvasProvider from 'context/canvas';\nimport WelcomeCanvas from 'components/blocks/WelcomeCanvas';\nimport './index.scss';\nimport { UserContext } from 'context/user';\n\nclass MainPage extends React.Component {\n  static contextType = UserContext;\n  context!: React.ContextType<typeof UserContext>\n  \n  render() {\n    const mainPage = cn('mainPage');\n    return (\n      <div className={mainPage()}>\n        <Container maxWidth=\"xl\">\n          <GridRow>\n            <GridColumn xs={12} sm={4} md={3}>\n              <h1 className={mainPage('h1')}>WS Chat & Canvas</h1>\n              {!this.context.user ? (\n                <div className={mainPage('form')}>\n                  <div className={mainPage('formTitle')}>Sign in</div>\n                  <AuthForm />\n                </div>\n              ) : (\n                <div className={mainPage('welcomeText')}>\n                    Hi {this.context.user.name}\n                </div>\n              )}\n            </GridColumn>\n            <GridColumn xs={12} sm={8} md={9}>\n              <CanvasProvider>\n                <WelcomeCanvas />\n              </CanvasProvider>\n            </GridColumn>\n          </GridRow>\n        </Container>\n      </div>\n    );\n  }\n}\n\nexport default MainPage;\n","import React from 'react';\nimport cn from 'utils/cn';\nimport Container from 'components/common/Container';\nimport AuthForm from 'containers/AuthForm';\nimport { Redirect } from 'react-router-dom';\nimport { UserContext } from 'context/user';\nimport './index.scss';\n\nclass SignInPage extends React.Component {\n  static contextType = UserContext;\n  context!: React.ContextType<typeof UserContext>\n\n  render() {\n    const signinPage = cn('signinPage');\n\n    if (this.context.user) {\n      return <Redirect to=\"/chat\" />;\n    }\n\n    return (\n      <div className={signinPage()}>\n        <Container maxWidth=\"xl\" alignItems=\"center\" justifyContent=\"center\">\n          <div className={signinPage('form')}>\n            <h1>Sign In</h1>\n            <AuthForm />\n          </div>\n        </Container>\n      </div>\n    );\n  }\n}\n\nexport default SignInPage;\n","import React from 'react';\nimport UserProvider from 'context/user';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from 'react-router-dom';\nimport PrivateRoute from 'containers/PrivateRoute';\nimport './App.scss';\nimport 'fontsource-roboto';\n\nimport Layout from 'components/blocks/Layout';\nimport ChatPage from 'components/pages/Chat';\nimport CanvasPage from 'components/pages/Canvas';\nimport MainPage from 'components/pages/Main';\nimport SignInPage from 'components/pages/SignIn';\n\nclass App extends React.Component {\n  render() {\n    return (\n      <div className=\"app\">\n        <UserProvider>\n          <Router>\n              <Switch>\n                <Route exact path=\"/\">\n                  <Layout>\n                    <MainPage />\n                  </Layout>\n                </Route>\n                <PrivateRoute exact path=\"/chat\">\n                    <Layout fixed>\n                      <ChatPage />\n                    </Layout>\n                </PrivateRoute>\n                <PrivateRoute exact path=\"/canvas\">\n                    <Layout fixed>\n                      <CanvasPage />\n                    </Layout>\n                </PrivateRoute>\n                <Route exact path=\"/signin\">\n                  <Layout>\n                    <SignInPage />\n                  </Layout>\n                </Route>\n                <Route path=\"*\">\n                  404\n                </Route>\n              </Switch>\n          </Router>\n        </UserProvider>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}